pico-8 cartridge // http://www.pico-8.com
version 16
__lua__
-- silence
-- by: people

_g={}
-- collision
function collide_side(self)
  local offset=self.w/3
  for i=-self.h/3,self.h/3,2 do
    local x1=(self.x+offset)/8
    local x2=(self.x-offset)/8
    local y=(self.y+i)/8
    local f1=fget(mget(x1,y))
    local f2=fget(mget(x2,y))
    if not f1==0 then
    return f1,flr((self.x+offset)/8)*8-offset
    elseif not f2==0 then
    return f2,flr((self.x-offset)/8)*8+self.w+offset
    end
  end
  return 0,0
end

foo=0
function collide_vert(self)
  local offset,fb,ft,yt,yb=self.h/2,0,0,self.y,self.y
  for i=-self.w/3,self.w/3,2 do
    local x=(self.x+i)/8
    local f1=fget(mget(x,(self.y+offset)/8))
    local f2=fget(mget(x,(self.y-offset)/8))
    if f1>0 then
    fb=f1
    yb=flr((self.y+offset)/8)*8-offset
    end
    if f2>0 then
      ft=f2
      yt=flr((self.y-offset)/8)*8+self.h+offset
    end
  end
  return fb,ft,yb,yt
end

function prnto(str,x,y,c,bg)
  for sx=x-1,x+1 do
    for sy=y-1,y+1 do
      ?str,sx,sy,bg
    end
  end
  ?str,x,y,c
end

function prntc(str,x,y,c,bg,spchars)
  prnto(str,x-(#str*4+spchars*3)/2,y-2,c,bg)
end

player={}
player.x=64
player.y=64
player.w=8
player.h=16
player.dy=0
function _update()
  -- player.dy+=0.5
  -- player.y+=player.dy
  -- if (player.y > 128) then player.y = 128 end
  -- local fb,ft,yb,yt=collide_vert(player)
  -- if band(fb,0x80)>0 then
  --   player.y=yb
  --   player.dy=0
  -- end
end

function _draw()
  -- cls()
  -- map(0,0,0,0,16,16)
  -- spr(1,player.x-4,player.y-8,1,2)
  -- print('x:'..(player.x/8)..' y:'..(player.y/8),32,16)
  -- print('offset:'..foo,32,24)
  cls()
  prntc('hello world!',64,64,7,9,0)
end

__gfx__
00000000000000000000000004002000040200000012000000220000000000000000000000000000000000000000000000000000000000000000000000000000
00000000009999000079990004402200044220000012122200112122000000000666660000666000000660000000000000000000000000000000000000000000
007007000799a97007799a90044444000444440000121211000121110000000006dddd60006dd600000660000000000000000000000000000000000000000000
00077000079999700679999004554540044554402211881022211880000000000699dd600069d600000660000000000000000000000000000000000000000000
00077000079999700779999004454540044454401182881021121880002220000699d96000699600000660000000000000000000000000000000000000000000
007007000799997006777990044444400444444000121220200212202111222006dddd60006dd600000660000000000000000000000000000000000000000000
00000000079999700776799002244440022444400012122000121220288111110666666000666600000660000000000000000000000000000000000000000000
00000000007777000077777000222200002222000012120000111220222222220000000000000000000000000000000000000000000000000000000000000000
00000000777777777776660077766600777666007776660000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000077677677776dd770776dd770776dd770776dd77000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000d6776d077677d0077677d00776d777777677d0000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000776666777767777076777d00776d777777777dd000000000000000000000000000000000000000000000000000000000000000000000000000000000
0007760677dddd77777dd7707677dd00777ddd007777ddd000000000000000000000000000000000000000000000000000000000000000000000000000000000
0577ddd7006dd600000ddd000277dd7006ddd2200277277000000000000000000000000000000000000000000000000000000000000000000000000000000000
7d77d77707700770000d77002220d777777d22220220077700000000000000000000000000000000000000000000000000000000000000000000000000000000
7d77d76707700770000d777002200770077002200220000000000000000000000000000000000000000000000000000000000000000000000000000000000000
11110011110000000000011111111110122112210000121000000000000000000000000000000000000000000000000000000000000000000000000000000000
1444101222110000000001bbb11bbb10122112211111122100000000000000000000000000000000000000000000000000000000000000000000000000000000
14444112222100000000111111111110112122221222122100000000000000000000000000000000000000000000000000000000000000000000000000000000
014444244442100000001bbbbb1bbb10012122221222122100000000000000000000000000000000000000000000000000000000000000000000000000000000
014ff444444410000011111111111110012122211111111100000000000000000000000000000000000000000000000000000000000000000000000000000000
014ff44444499100001bb1bbbbbbb100122122100188100000000000000000000000000000000000000000000000000000000000000000000000000000000000
01444499922161000011111111111110122122101288210000000000000000000000000000000000000000000000000000000000000000000000000000000000
0014441162211100001bbbbbb1bbbb10112128811211210000000000000000000000000000000000000000000000000000000000000000000000000000000000
00144221122556100011111111111110001128812212110000000000000000000000000000000000000000000000000000000000000000000000000000000000
0001422444445510001bbbbbbbbbb100000122212112221000000000000000000000000000000000000000000000000000000000000000000000000000000000
00014444444444100011111111111110001012112212221000000000000000000000000000000000000000000000000000000000000000000000000000000000
000012244114441000001bbbbbbbbb10012112122118821000000000000000000000000000000000000000000000000000000000000000000000000000000000
00115222244441000111111111111111122211121018821000000000000000000000000000000000000000000000000000000000000000000000000000000000
001775222222211001bb1bbbb1b1bbb1112221121001221000000000000000000000000000000000000000000000000000000000000000000000000000000000
01177772222277110111111111111111001221222112221000000000000000000000000000000000000000000000000000000000000000000000000000000000
177667766666776701bb1bbbbbb1bbb1012221222101221000000000000000000000000000000000000000000000000000000000000000000000000000000000
ddd0ddd0dd0dddd0dd0ddddd0dddd555555dddd0ddd0ddd05d5dd5d5000000000000000000000000000000000000000000000000000000000000000000000000
ddd5ddd5dd5dddd5dd5ddddd0d99d5dddd5d99d0666666665d5995d5000000000000000000000000000000000000000000000000000000000000000000000000
ddd5ddd5dd5dddd5dd5ddddd0dddd5dddd5dddd055555555055dd550000000000000000000000000000000000000000000000000000000000000000000000000
5555ddd555555555dd5555500dddd055550dddd00000000000555500000000000000000000000000000000000000000000000000000000000000000000000000
ddd555552222222255525ddd005550000005550000000000005dd500000000000000000000000000000000000000000000000000000000000000000000000000
ddd522222020202020225ddd00999000000999000000000000555500000000000000000000000000000000000000000000000000000000000000000000000000
ddd522020202020202025ddd00999000000999000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
05552020000000000022555000555000000555000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
ddd52200ddd11ddd02025ddd005d50000005d5000000005500000000000000000000000000000000000000000000000000000000000000000000000000000000
ddd52020ddd55ddd00225ddd005d50000005d5000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
ddd52200ddd55ddd02025ddd005d50000005d5000000055500555500000000000000000000000000000000000000000000000000000000000000000000000000
055520200551155000225550005550000025550000000555005dd500000000000000000000000000000000000000000000000000000000000000000000000000
ddd52200ddd55ddd02025ddddddd50000005dddd0000000000555500000000000000000000000000000000000000000000000000000000000000000000000000
ddd52020ddd55ddd00225dddd99d50020205d99d05550550055dd550000000000000000000000000000000000000000000000000000000000000000000000000
ddd52200ddd55ddd02025ddddddd50202025dddd050005505d5995d5000000000000000000000000000000000000000000000000000000000000000000000000
0555202055511555002255505555522222255555050005505d5dd5d5000000000000000000000000000000000000000000000000000000000000000000000000
ddd522020000000002025ddd000000000000000000500550ddd5dddd000000000000000000000000000000000000000000000000000000000000000000000000
ddd520200202020220225ddd002002020202002000550550d5d5dddd000000000000000000000000000000000000000000000000000000000000000000000000
ddd522222020202022225ddd000020202020200000000550ddd55555000000000000000000000000000000000000000000000000000000000000000000000000
05555555222222225555555000222222222220200000055000099999000000000000000000000000000000000000000000000000000000000000000000000000
ddd5ddd555555555dd5ddddd02025555555522000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
ddd5ddd5dd5dddd5dd5ddddd00225dddddd520200000055000000000000000000000000000000000000000000000000000000000000000000000000000000000
ddd5ddd5dd5dddd5dd5ddddd02025dddddd522000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
55505550550555505505555000225555555520200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
ddd0ddd0dd0dddd0dd0ddddd02025ddd555522000555555008000800000660000000000000000000000000000000000000000000000000000000000000000000
ddd5ddd5dd5dddd5dd5ddddd00225dddddd520205000000508000800006556000000000000000000000000000000000000000000000000000000000000000000
ddd5ddd5dd5dddd5dd5ddddd02025dddddd522005070070507800780006556000000000000000000000000000000000000000000000000000000000000000000
05515551551555515515555000225555555520205000000587808780000660000000000000000000000000000000000000000000000000000000000000000000
05515551551555515515555000022222222202005000600586808680000000000000000000000000000000000000000000000000000000000000000000000000
ddd5ddd5dd5dddd5dd5ddddd002020202020200050000005d6d5d6d5000000000000000000000000000000000000000000000000000000000000000000000000
ddd5ddd5dd5dddd5dd5ddddd000002020202000050000005ddd1ddd1000000000000000000000000000000000000000000000000000000000000000000000000
555055505505555055055555000000000000000005555550ddd5ddd5000000000000000000000000000000000000000000000000000000000000000000000000
__gff__
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000080808020204010000000000000000000808080202000100000000000000000008080808080004000000000000000000080808080800081080000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
6361616161616161616161616161616400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
5255650000000000000000006555655000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
5265000000000000000000000065655000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
5200000000000000000000000000005000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
5200000000000000000000000000005000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
6200000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4200000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
5200000000000000000000000000005000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
5200000000000000000000000000005000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
5200550075000000000000750000655000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
5255650000000000000000000000555000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
7341414141414141414141414141417400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
